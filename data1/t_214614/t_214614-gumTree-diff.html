<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
<title>Diff result</title>
<style type="text/css">
body { width: 100%; font-size: 10pt; }
h1 { font-size: 125%; }
div.content { font-family: Verdana, "DejaVu Sans Condensed", "Liberation Sans","Nimbus Sans L", Helvetica, sans-serif; margin : 1em auto; width: 100%; }
div.left { float: left; width: 48%; padding: 1em; }
div.right { float: right; width: 48%; padding: 1em; }
div.code { font-family: "Liberation Mono", "Courrier New", monospace; border:1px solid black;}
div.clear { clear: both; }
span.del { background-color : red; font-weight: normal; font-style: normal;}
span.add { background-color : lightgreen; font-weight: bold; font-style: normal;}
span.upd { background-color : orange; font-weight: bold; font-style: italic;}
span.id { background-color : white; font-weight: normal; font-style: normal;}
span.mv { background-color : yellow; font-weight: normal; font-style: normal;}
</style></head><body><div class="content"><div class="left">
<h1>left_JXButtonGroupPanel_1.2.java</h1>
<div class="code">
<div class="id">
// $Id$<br/>
// Copyright (c) 2006 The Regents of the University of California. All<br/>
// Rights Reserved. Permission to use, copy, modify, and distribute this<br/>
// software and its documentation without fee, and without a written<br/>
// agreement is hereby granted, provided that the above copyright notice<br/>
// and this paragraph appear in all copies. This software program and<br/>
// documentation are copyrighted by The Regents of the University of<br/>
// California. The software program and documentation are supplied "AS<br/>
// IS", without any accompanying services from The Regents. The Regents<br/>
// does not warrant that the operation of the program will be<br/>
// uninterrupted or error-free. The end-user understands that the program<br/>
// was developed for research purposes and is advised not to rely<br/>
// exclusively on the program for any reason. IN NO EVENT SHALL THE<br/>
// UNIVERSITY OF CALIFORNIA BE LIABLE TO ANY PARTY FOR DIRECT, INDIRECT,<br/>
// SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, INCLUDING LOST PROFITS,<br/>
// ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN IF<br/>
// THE UNIVERSITY OF CALIFORNIA HAS BEEN ADVISED OF THE POSSIBILITY OF<br/>
// SUCH DAMAGE. THE UNIVERSITY OF CALIFORNIA SPECIFICALLY DISCLAIMS ANY<br/>
// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF<br/>
// MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. THE SOFTWARE<br/>
// PROVIDED HEREUNDER IS ON AN "AS IS" BASIS, AND THE UNIVERSITY OF<br/>
// CALIFORNIA HAS NO OBLIGATIONS TO PROVIDE MAINTENANCE, SUPPORT,<br/>
// UPDATES, ENHANCEMENTS, OR MODIFICATIONS.<br/>
<br/>
package org.argouml.swingext;<br/>
<br/>
<span class="mv">import <span class="mv">javax.swing</span>.*;</span><br/>
<br/>
import <span class="mv">java.awt</span>.*;<br/>
import java.awt.event.ActionEvent;<br/>
import java.awt.event.ActionListener;<br/>
import java.awt.event.KeyEvent;<br/>
import java.util.Iterator;<br/>
<br/>
/**<br/>
 * Container which makes it easy to manage button groups<br/>
 * it also supports correct focus and selection transfer<br/>
 * with help of arrow keys<br/>
 * <br/>
 * Example:<br/>
 *<br/>
 * JXButtonGroupPanel panel = new JXButtonGroupPanel();  <br/>
 * panel.add(new JRadioButton("One"));<br/>
 * panel.add(new JRadioButton("Two"));<br/>
 * panel.add(new JRadioButton("Three"));  <br/>
 * <br/>
 * @author Alexander Potochkin<br/>
 * https://swinghelper.dev.java.net/<br/>
 */<br/>
public class JXButtonGroupPanel extends JPanel {<br/>
    /**<br/>
     * The UID<br/>
     */<br/>
    private static final long serialVersionUID = -8731489332460566404L;<br/>
    private JXButtonGroup[] group;<br/>
<br/>
    /**<br/>
     * Creates a JXButtonGroupPanel with a group.<br/>
     */<br/>
    public JXButtonGroupPanel() {<br/>
        this(1);<br/>
    }<br/>
<br/>
    /**<br/>
     * Creates a JXButtonGroupPanel with a group.<br/>
     * <br/>
     * @param layoutManager     the LayoutManager to be set.<br/>
     */<br/>
    public JXButtonGroupPanel(LayoutManager layoutManager) {<br/>
        this(layoutManager, 1);<br/>
    }<br/>
<br/>
    /**<br/>
     * Creates a JXButtonGroupPanel with the given layout and the given number <br/>
     * of groups.<br/>
     * <br/>
     * @param layoutManager     the LayoutManager to be set.<br/>
     * @param numberOfGroups    the number of JRadioButton groups to be created<br/>
     */<br/>
    public JXButtonGroupPanel(LayoutManager layoutManager, int numberOfGroups) {<br/>
        this(numberOfGroups);<br/>
        this.setLayout(layoutManager);<br/>
    }<br/>
    <br/>
    /**<br/>
     * Creates a JXButtonGroupPanel with the given number of groups<br/>
     *  <br/>
     * @param numberOfGroups    the number of JRadioButton groups to be created<br/>
     */<br/>
    public JXButtonGroupPanel(int numberOfGroups) {<br/>
        assert (numberOfGroups &gt; 0);<br/>
        <br/>
        group = new JXButtonGroup[numberOfGroups];<br/>
        for (int i = 0; i &lt; numberOfGroups; i++) {<br/>
            group[i] = new JXButtonGroup();<br/>
        }<br/>
            <br/>
        <span class="del"><span class="del"><span class="del">setFocusTraversalPolicyProvider</span>(<span class="del">true</span>)</span>;</span><br/>
        setFocusTraversalPolicy(new JXButtonPanelFocusTraversalPolicy());<br/>
<br/>
        ActionListener actionHandler = new ActionHandler(this);<br/>
<br/>
        registerKeyboardAction(actionHandler, ActionHandler.FORWARD,<br/>
                KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT, 0),<br/>
                JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);<br/>
        registerKeyboardAction(actionHandler, ActionHandler.FORWARD,<br/>
                KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0),<br/>
                JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);<br/>
<br/>
        registerKeyboardAction(actionHandler, ActionHandler.BACKWARD,<br/>
                KeyStroke.getKeyStroke(KeyEvent.VK_LEFT, 0),<br/>
                JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);<br/>
        registerKeyboardAction(actionHandler, ActionHandler.BACKWARD,<br/>
                KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0),<br/>
                JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);<br/>
    }<br/>
<br/>
    /**<br/>
     * Add the given component of the given group to the panel.<br/>
     * If the component is a JRadioButton, it's also added to the button <br/>
     * group.<br/>
     * <br/>
     * @see java.awt.Container#addImpl(java.awt.Component, java.lang.Object, int)<br/>
     */<br/>
    protected void addImpl(Component c, Object constraints, int index, <br/>
            int groupIndex) {<br/>
        if (c instanceof JRadioButton) {<br/>
            JRadioButton button = (JRadioButton) c;<br/>
            group[groupIndex].add(button);<br/>
        }<br/>
        super.addImpl(c, constraints, index);<br/>
    }<br/>
<br/>
<br/>
    /**<br/>
     * Add the given component to the given group of the panel.<br/>
     * If the component is a JRadioButton, it's also added to the button <br/>
     * group.<br/>
     * <br/>
     * @see java.awt.Container#add(java.awt.Component, int)<br/>
     */<br/>
    public Component add(Component c, int index, int groupIndex) {<br/>
        this.add(c, null, index, groupIndex);<br/>
        return c;<br/>
    }<br/>
<br/>
    /**<br/>
     * Add the given component to the first group of the panel.<br/>
     * If the component is a JRadioButton, it's also added to the button <br/>
     * group.<br/>
     * <br/>
     * @see java.awt.Container#add(java.awt.Component, int)<br/>
     */<br/>
    public Component add(Component c, int index) {<br/>
        return this.add(c, index, 0);<br/>
    }<br/>
    <br/>
    /**<br/>
     * Add the given component to the given group of the panel.<br/>
     * If the component is a JRadioButton, it's also added to the button <br/>
     * group.<br/>
     * <br/>
     * @see java.awt.Container#add(java.awt.Component, java.lang.Object, int)<br/>
     */<br/>
    public void add(Component c, Object constraints, int index, <br/>
            int groupIndex) {<br/>
        this.addImpl(c, constraints, -1, groupIndex);<br/>
    }<br/>
    <br/>
    /**<br/>
     * Add the given component to the first group of the panel.<br/>
     * If the component is a JRadioButton, it's also added to the button <br/>
     * group.<br/>
     * <br/>
     * @see java.awt.Container#add(java.awt.Component, java.lang.Object, int)<br/>
     */<br/>
    public void add(Component c, Object constraints, int index) {<br/>
        this.add(c, constraints, -1, 0);<br/>
    }<br/>
<br/>
    /**<br/>
     * Add the given component to the first group of the panel.<br/>
     * If the component is a JRadioButton, it's also added to the button <br/>
     * group.<br/>
     * <br/>
     * @see java.awt.Container#add(java.awt.Component)<br/>
     */<br/>
    public Component add(Component c) {<br/>
        this.addImpl(c, null, -1, 0);<br/>
        return c;<br/>
    }<br/>
<br/>
    /**<br/>
     * Add the given component to the first group of the panel.<br/>
     * If the component is a JRadioButton, it's also added to the button <br/>
     * group.<br/>
     * <br/>
     * @see java.awt.Container#add(java.awt.Component)<br/>
     */<br/>
    public void add(Component c, Object constraints) {<br/>
        this.addImpl(c, constraints, -1, 0);<br/>
    }<br/>
    <br/>
    /**<br/>
     * Remove the given button from the given group<br/>
     * <br/>
     * @see java.awt.Container#remove(int)<br/>
     */<br/>
    public void remove(int index, int groupIndex) {<br/>
        Component c = getComponent(index);<br/>
        if (c instanceof JRadioButton) {<br/>
            JRadioButton button = (JRadioButton) c;<br/>
            group[groupIndex].remove(button);<br/>
        }<br/>
        super.remove(index);<br/>
    }<br/>
    <br/>
    /**<br/>
     * Remove the given button from the first group<br/>
     * <br/>
     * @see java.awt.Container#remove(int)<br/>
     */<br/>
    public void remove(int index) {<br/>
        this.remove(index, 0);<br/>
    }<br/>
<br/>
    /**<br/>
     * Remove every button from the given group<br/>
     * <br/>
     * @see java.awt.Container#removeAll()<br/>
     */<br/>
    public void removeAll(int groupIndex) {<br/>
        super.removeAll();<br/>
        group[groupIndex].removeAll();<br/>
    }<br/>
<br/>
    /**<br/>
     * Remove every button from the first group<br/>
     * <br/>
     * @see java.awt.Container#removeAll()<br/>
     */<br/>
    public void removeAll() {<br/>
        this.removeAll(0);<br/>
    }<br/>
    <br/>
    /**<br/>
     * Counts the number of buttons of the given group<br/>
     * <br/>
     * @param groupIndex        the index of the group<br/>
     * @return  the number of the buttons<br/>
     */<br/>
    public int getButtonCount(int groupIndex) {<br/>
        return group[groupIndex].getButtonCount();<br/>
    }<br/>
<br/>
    /**<br/>
     * Counts the number of buttons of the first group<br/>
     * <br/>
     * @return  the number of the buttons<br/>
     */<br/>
    public int getButtonCount() {<br/>
        return getButtonCount(0);<br/>
    }<br/>
    <br/>
    /**<br/>
     * Getter for a button of the given group<br/>
     * <br/>
     * @param i                 the index of the button<br/>
     * @param groupIndex        the index of the group<br/>
     * @return                  the JRadioButton<br/>
     */<br/>
    public JRadioButton getButton(int i, int groupIndex) {<br/>
        return group[groupIndex].getButton(i);<br/>
    }<br/>
    <br/>
    /**<br/>
     * Getter for a button of the first group<br/>
     * <br/>
     * @param i         the index of the button<br/>
     * @return          the JRadioButton<br/>
     */<br/>
    public JRadioButton getButton(int i) {<br/>
        return this.getButton(i, 0);<br/>
    }<br/>
<br/>
    /**<br/>
     * Clear selection of all buttons of the given group from the panel<br/>
     *<br/>
     * @param groupIndex        the index of the group<br/>
     */<br/>
    public void clearSelection(int groupIndex) {<br/>
        group[groupIndex].clearSelection();<br/>
    }<br/>
<br/>
    /**<br/>
     * Clear selection of all buttons of the first group from the panel<br/>
     */<br/>
    public void clearSelection() {<br/>
        this.clearSelection(0);<br/>
    }<br/>
    <br/>
    /**<br/>
     * Selects the radiobutton belonging to the given group with the given <br/>
     * actionCommand<br/>
     * <br/>
     * @param actionCommand The actionCommand of the button that should be<br/>
     * selected.<br/>
     * @param groupIndex        the index of the group<br/>
     */<br/>
    public void setSelected(String actionCommand, int groupIndex) {<br/>
        Iterator buttonsIt = group[groupIndex].getButtons().iterator();<br/>
        ButtonModel model = null;<br/>
        while (buttonsIt.hasNext()) {<br/>
            model = ((JRadioButton) buttonsIt.next()).getModel();<br/>
            if (actionCommand.equals(model.getActionCommand())) {<br/>
                model.setSelected(true);<br/>
                break;<br/>
            }<br/>
        }<br/>
    }<br/>
    <br/>
    /**<br/>
     * Selects the radiobutton belonging to the first group with the given <br/>
     * actionCommand<br/>
     * <br/>
     * @param actionCommand The actionCommand of the button that should be<br/>
     * selected.<br/>
     */<br/>
    public void setSelected(String actionCommand) {<br/>
        this.setSelected(actionCommand, 0);<br/>
    }<br/>
    <br/>
    /**<br/>
     * Set the selected button of a group<br/>
     * <br/>
     * @param m         the ButtonModel<br/>
     * @param b         true if the button should be selected<br/>
     * @param groupIndex        the index of the group<br/>
     */<br/>
    public void setSelected(ButtonModel m, boolean b, int groupIndex) {<br/>
        group[groupIndex].setSelected(m, b);<br/>
    }<br/>
    <br/>
    /**<br/>
     * Check if the given buttons belong to the same group.<br/>
     * <br/>
     * @param button1   the first button<br/>
     * @param button2   the second button<br/>
     * @return          true if the buttons belong to the same group<br/>
     */<br/>
    public boolean buttonsAreGrouped(Component button1, Component button2) {<br/>
        for (int i = 0; i &lt; group.length; i++) {<br/>
            if (group[i].contains(button1)) {<br/>
                <br/>
                return group[i].contains(button2);<br/>
            }<br/>
        }<br/>
        // this means that buttons are not grouped.. this shouldn't happen<br/>
        return false;<br/>
    }<br/>
    <br/>
    /**<br/>
     * Set the selected button of a group<br/>
     * <br/>
     * @param m         the ButtonModel<br/>
     * @param b         true if the button should be selected<br/>
     */<br/>
    public void setSelected(ButtonModel m, boolean b) {<br/>
        this.setSelected(m, b, 0);<br/>
    }<br/>
    <br/>
    private static class ActionHandler implements ActionListener {<br/>
        private final JXButtonGroupPanel panel;<br/>
        private JXButtonPanelFocusTraversalPolicy ftp;<br/>
<br/>
        private static final String FORWARD = "moveSelectionForward";<br/>
        private static final String BACKWARD = "moveSelectionBackward";<br/>
<br/>
        public ActionHandler(JXButtonGroupPanel jXButtonGroupPanel) {<br/>
            this.panel = jXButtonGroupPanel;<br/>
            this.ftp = <br/>
                (JXButtonPanelFocusTraversalPolicy)<br/>
                    panel.getFocusTraversalPolicy();<br/>
        }<br/>
<br/>
        public void actionPerformed(ActionEvent e) {<br/>
            String actionCommand = e.getActionCommand();<br/>
            Component fo =<br/>
                    KeyboardFocusManager.getCurrentKeyboardFocusManager()<br/>
                    .getFocusOwner();<br/>
            Component next = null;<br/>
            <br/>
            ftp.isSkipUnselected = false;<br/>
<br/>
            if (FORWARD.equals(actionCommand)) {<br/>
                if (fo != ftp.getLastComponent(panel)) {<br/>
                    next = getNextElement(fo);<br/>
                }<br/>
            } else if (BACKWARD.equals(actionCommand)) {<br/>
                if (fo != ftp.getFirstComponent(panel)) {<br/>
                    next = getPreviousElement(fo);<br/>
                }<br/>
            } else {<br/>
                throw new AssertionError("Unexpected action command: " <br/>
                        + actionCommand);<br/>
            }<br/>
<br/>
            ftp.isSkipUnselected = true;<br/>
<br/>
            if (fo instanceof JRadioButton) {<br/>
                JRadioButton b = (JRadioButton) fo;<br/>
                b.getModel().setPressed(false);                <br/>
            }<br/>
            if (next != null) {<br/>
                next.requestFocusInWindow();<br/>
                for (int i = 0; i &lt; panel.group.length; i++) {<br/>
                    if (panel.group[i].contains(next)) {<br/>
                        JRadioButton b = (JRadioButton) next;<br/>
                        if (panel.group[i].getSelection() != null<br/>
                                &amp;&amp; !b.isSelected()) {<br/>
                            b.setSelected(true);<br/>
                        }<br/>
                    }<br/>
                }<br/>
            }<br/>
        }<br/>
        <br/>
        private Component getNextElement(Component fo) {<br/>
            Component next = ftp.getComponentAfter(panel, fo);<br/>
            if (next == null || !panel.buttonsAreGrouped(fo, next)) {<br/>
                next = null;<br/>
            } else if (!(next instanceof JRadioButton)) {<br/>
                next = getNextElement(next);<br/>
            }<br/>
            return next;<br/>
        }<br/>
        <br/>
        private Component getPreviousElement(Component fo) {<br/>
            Component next = ftp.getComponentBefore(panel, fo);<br/>
            if (next == null || !panel.buttonsAreGrouped(fo, next)) {<br/>
                next = null;<br/>
            } else if (!(next instanceof JRadioButton)) {<br/>
                next = getPreviousElement(next);<br/>
            }<br/>
            return next;<br/>
        }        <br/>
    }<br/>
<br/>
    /**<br/>
     * Private class JXButtonPanelFocusTraversalPolicy<br/>
     */<br/>
    private class JXButtonPanelFocusTraversalPolicy <br/>
        extends LayoutFocusTraversalPolicy {<br/>
        /**<br/>
         * The UID<br/>
         */<br/>
        private static final long serialVersionUID = -5752691817123671168L;<br/>
        private boolean isSkipUnselected = true;<br/>
<br/>
        protected boolean accept(Component c) {<br/>
            for (int i = 0; i &lt; group.length; i++) {<br/>
                if (isSkipUnselected &amp;&amp; group[i].contains(c)) {<br/>
                    JRadioButton b = (JRadioButton) c;<br/>
                    if (group[i].getSelection() != null &amp;&amp; !b.isSelected()) {<br/>
                        return false;<br/>
                    }<br/>
                }<br/>
            }<br/>
            return super.accept(c);<br/>
        }<br/>
    }<br/>
}<br/>
    <br/>
</div>
</div>
</div>
<div class="right">
<h1>right_JXButtonGroupPanel_1.3.java</h1>
<div class="code">
<div class="id">
// $Id$<br/>
// Copyright (c) 2006 The Regents of the University of California. All<br/>
// Rights Reserved. Permission to use, copy, modify, and distribute this<br/>
// software and its documentation without fee, and without a written<br/>
// agreement is hereby granted, provided that the above copyright notice<br/>
// and this paragraph appear in all copies. This software program and<br/>
// documentation are copyrighted by The Regents of the University of<br/>
// California. The software program and documentation are supplied "AS<br/>
// IS", without any accompanying services from The Regents. The Regents<br/>
// does not warrant that the operation of the program will be<br/>
// uninterrupted or error-free. The end-user understands that the program<br/>
// was developed for research purposes and is advised not to rely<br/>
// exclusively on the program for any reason. IN NO EVENT SHALL THE<br/>
// UNIVERSITY OF CALIFORNIA BE LIABLE TO ANY PARTY FOR DIRECT, INDIRECT,<br/>
// SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, INCLUDING LOST PROFITS,<br/>
// ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN IF<br/>
// THE UNIVERSITY OF CALIFORNIA HAS BEEN ADVISED OF THE POSSIBILITY OF<br/>
// SUCH DAMAGE. THE UNIVERSITY OF CALIFORNIA SPECIFICALLY DISCLAIMS ANY<br/>
// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF<br/>
// MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. THE SOFTWARE<br/>
// PROVIDED HEREUNDER IS ON AN "AS IS" BASIS, AND THE UNIVERSITY OF<br/>
// CALIFORNIA HAS NO OBLIGATIONS TO PROVIDE MAINTENANCE, SUPPORT,<br/>
// UPDATES, ENHANCEMENTS, OR MODIFICATIONS.<br/>
<br/>
package org.argouml.swingext;<br/>
<br/>
import <span class="add"><span class="mv">java.awt</span>.<span class="add">Component</span></span>;<br/>
<span class="add">import <span class="add"><span class="add"><span class="add">java</span>.<span class="add">awt</span></span>.<span class="add">KeyboardFocusManager</span></span>;</span><br/>
<span class="add">import <span class="add"><span class="add"><span class="add">java</span>.<span class="add">awt</span></span>.<span class="add">LayoutManager</span></span>;</span><br/>
import java.awt.event.ActionEvent;<br/>
import java.awt.event.ActionListener;<br/>
import java.awt.event.KeyEvent;<br/>
import java.util.Iterator;<br/>
<br/>
<span class="mv">import <span class="add"><span class="mv">javax.swing</span>.<span class="add">ButtonModel</span></span>;</span><br/>
<span class="add">import <span class="add"><span class="add"><span class="add">javax</span>.<span class="add">swing</span></span>.<span class="add">JComponent</span></span>;</span><br/>
<span class="add">import <span class="add"><span class="add"><span class="add">javax</span>.<span class="add">swing</span></span>.<span class="add">JPanel</span></span>;</span><br/>
<span class="add">import <span class="add"><span class="add"><span class="add">javax</span>.<span class="add">swing</span></span>.<span class="add">JRadioButton</span></span>;</span><br/>
<span class="add">import <span class="add"><span class="add"><span class="add">javax</span>.<span class="add">swing</span></span>.<span class="add">KeyStroke</span></span>;</span><br/>
<span class="add">import <span class="add"><span class="add"><span class="add">javax</span>.<span class="add">swing</span></span>.<span class="add">LayoutFocusTraversalPolicy</span></span>;</span><br/>
<br/>
/**<br/>
 * Container which makes it easy to manage button groups<br/>
 * it also supports correct focus and selection transfer<br/>
 * with help of arrow keys<br/>
 * <br/>
 * Example:<br/>
 *<br/>
 * JXButtonGroupPanel panel = new JXButtonGroupPanel();  <br/>
 * panel.add(new JRadioButton("One"));<br/>
 * panel.add(new JRadioButton("Two"));<br/>
 * panel.add(new JRadioButton("Three"));  <br/>
 * <br/>
 * @author Alexander Potochkin<br/>
 * https://swinghelper.dev.java.net/<br/>
 */<br/>
public class JXButtonGroupPanel extends JPanel {<br/>
    /**<br/>
     * The UID<br/>
     */<br/>
    private static final long serialVersionUID = -8731489332460566404L;<br/>
    private JXButtonGroup[] group;<br/>
<br/>
    /**<br/>
     * Creates a JXButtonGroupPanel with a group.<br/>
     */<br/>
    public JXButtonGroupPanel() {<br/>
        this(1);<br/>
    }<br/>
<br/>
    /**<br/>
     * Creates a JXButtonGroupPanel with a group.<br/>
     * <br/>
     * @param layoutManager     the LayoutManager to be set.<br/>
     */<br/>
    public JXButtonGroupPanel(LayoutManager layoutManager) {<br/>
        this(layoutManager, 1);<br/>
    }<br/>
<br/>
    /**<br/>
     * Creates a JXButtonGroupPanel with the given layout and the given number <br/>
     * of groups.<br/>
     * <br/>
     * @param layoutManager     the LayoutManager to be set.<br/>
     * @param numberOfGroups    the number of JRadioButton groups to be created<br/>
     */<br/>
    public JXButtonGroupPanel(LayoutManager layoutManager, int numberOfGroups) {<br/>
        this(numberOfGroups);<br/>
        this.setLayout(layoutManager);<br/>
    }<br/>
    <br/>
    /**<br/>
     * Creates a JXButtonGroupPanel with the given number of groups<br/>
     *  <br/>
     * @param numberOfGroups    the number of JRadioButton groups to be created<br/>
     */<br/>
    public JXButtonGroupPanel(int numberOfGroups) {<br/>
        assert (numberOfGroups &gt; 0);<br/>
        <br/>
        group = new JXButtonGroup[numberOfGroups];<br/>
        for (int i = 0; i &lt; numberOfGroups; i++) {<br/>
            group[i] = new JXButtonGroup();<br/>
        }<br/>
        <br/>
//        setFocusTraversalPolicyProvider(true);<br/>
        setFocusTraversalPolicy(new JXButtonPanelFocusTraversalPolicy());<br/>
<br/>
        ActionListener actionHandler = new ActionHandler(this);<br/>
<br/>
        registerKeyboardAction(actionHandler, ActionHandler.FORWARD,<br/>
                KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT, 0),<br/>
                JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);<br/>
        registerKeyboardAction(actionHandler, ActionHandler.FORWARD,<br/>
                KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0),<br/>
                JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);<br/>
<br/>
        registerKeyboardAction(actionHandler, ActionHandler.BACKWARD,<br/>
                KeyStroke.getKeyStroke(KeyEvent.VK_LEFT, 0),<br/>
                JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);<br/>
        registerKeyboardAction(actionHandler, ActionHandler.BACKWARD,<br/>
                KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0),<br/>
                JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);<br/>
    }<br/>
<br/>
    /**<br/>
     * Add the given component of the given group to the panel.<br/>
     * If the component is a JRadioButton, it's also added to the button <br/>
     * group.<br/>
     * <br/>
     * @see java.awt.Container#addImpl(java.awt.Component, java.lang.Object, int)<br/>
     */<br/>
    protected void addImpl(Component c, Object constraints, int index, <br/>
            int groupIndex) {<br/>
        if (c instanceof JRadioButton) {<br/>
            JRadioButton button = (JRadioButton) c;<br/>
            group[groupIndex].add(button);<br/>
        }<br/>
        super.addImpl(c, constraints, index);<br/>
    }<br/>
<br/>
<br/>
    /**<br/>
     * Add the given component to the given group of the panel.<br/>
     * If the component is a JRadioButton, it's also added to the button <br/>
     * group.<br/>
     * <br/>
     * @see java.awt.Container#add(java.awt.Component, int)<br/>
     */<br/>
    public Component add(Component c, int index, int groupIndex) {<br/>
        this.add(c, null, index, groupIndex);<br/>
        return c;<br/>
    }<br/>
<br/>
    /**<br/>
     * Add the given component to the first group of the panel.<br/>
     * If the component is a JRadioButton, it's also added to the button <br/>
     * group.<br/>
     * <br/>
     * @see java.awt.Container#add(java.awt.Component, int)<br/>
     */<br/>
    public Component add(Component c, int index) {<br/>
        return this.add(c, index, 0);<br/>
    }<br/>
    <br/>
    /**<br/>
     * Add the given component to the given group of the panel.<br/>
     * If the component is a JRadioButton, it's also added to the button <br/>
     * group.<br/>
     * <br/>
     * @see java.awt.Container#add(java.awt.Component, java.lang.Object, int)<br/>
     */<br/>
    public void add(Component c, Object constraints, int index, <br/>
            int groupIndex) {<br/>
        this.addImpl(c, constraints, -1, groupIndex);<br/>
    }<br/>
    <br/>
    /**<br/>
     * Add the given component to the first group of the panel.<br/>
     * If the component is a JRadioButton, it's also added to the button <br/>
     * group.<br/>
     * <br/>
     * @see java.awt.Container#add(java.awt.Component, java.lang.Object, int)<br/>
     */<br/>
    public void add(Component c, Object constraints, int index) {<br/>
        this.add(c, constraints, -1, 0);<br/>
    }<br/>
<br/>
    /**<br/>
     * Add the given component to the first group of the panel.<br/>
     * If the component is a JRadioButton, it's also added to the button <br/>
     * group.<br/>
     * <br/>
     * @see java.awt.Container#add(java.awt.Component)<br/>
     */<br/>
    public Component add(Component c) {<br/>
        this.addImpl(c, null, -1, 0);<br/>
        return c;<br/>
    }<br/>
<br/>
    /**<br/>
     * Add the given component to the first group of the panel.<br/>
     * If the component is a JRadioButton, it's also added to the button <br/>
     * group.<br/>
     * <br/>
     * @see java.awt.Container#add(java.awt.Component)<br/>
     */<br/>
    public void add(Component c, Object constraints) {<br/>
        this.addImpl(c, constraints, -1, 0);<br/>
    }<br/>
    <br/>
    /**<br/>
     * Remove the given button from the given group<br/>
     * <br/>
     * @see java.awt.Container#remove(int)<br/>
     */<br/>
    public void remove(int index, int groupIndex) {<br/>
        Component c = getComponent(index);<br/>
        if (c instanceof JRadioButton) {<br/>
            JRadioButton button = (JRadioButton) c;<br/>
            group[groupIndex].remove(button);<br/>
        }<br/>
        super.remove(index);<br/>
    }<br/>
    <br/>
    /**<br/>
     * Remove the given button from the first group<br/>
     * <br/>
     * @see java.awt.Container#remove(int)<br/>
     */<br/>
    public void remove(int index) {<br/>
        this.remove(index, 0);<br/>
    }<br/>
<br/>
    /**<br/>
     * Remove every button from the given group<br/>
     * <br/>
     * @see java.awt.Container#removeAll()<br/>
     */<br/>
    public void removeAll(int groupIndex) {<br/>
        super.removeAll();<br/>
        group[groupIndex].removeAll();<br/>
    }<br/>
<br/>
    /**<br/>
     * Remove every button from the first group<br/>
     * <br/>
     * @see java.awt.Container#removeAll()<br/>
     */<br/>
    public void removeAll() {<br/>
        this.removeAll(0);<br/>
    }<br/>
    <br/>
    /**<br/>
     * Counts the number of buttons of the given group<br/>
     * <br/>
     * @param groupIndex        the index of the group<br/>
     * @return  the number of the buttons<br/>
     */<br/>
    public int getButtonCount(int groupIndex) {<br/>
        return group[groupIndex].getButtonCount();<br/>
    }<br/>
<br/>
    /**<br/>
     * Counts the number of buttons of the first group<br/>
     * <br/>
     * @return  the number of the buttons<br/>
     */<br/>
    public int getButtonCount() {<br/>
        return getButtonCount(0);<br/>
    }<br/>
    <br/>
    /**<br/>
     * Getter for a button of the given group<br/>
     * <br/>
     * @param i                 the index of the button<br/>
     * @param groupIndex        the index of the group<br/>
     * @return                  the JRadioButton<br/>
     */<br/>
    public JRadioButton getButton(int i, int groupIndex) {<br/>
        return group[groupIndex].getButton(i);<br/>
    }<br/>
    <br/>
    /**<br/>
     * Getter for a button of the first group<br/>
     * <br/>
     * @param i         the index of the button<br/>
     * @return          the JRadioButton<br/>
     */<br/>
    public JRadioButton getButton(int i) {<br/>
        return this.getButton(i, 0);<br/>
    }<br/>
<br/>
    /**<br/>
     * Clear selection of all buttons of the given group from the panel<br/>
     *<br/>
     * @param groupIndex        the index of the group<br/>
     */<br/>
    public void clearSelection(int groupIndex) {<br/>
        group[groupIndex].clearSelection();<br/>
    }<br/>
<br/>
    /**<br/>
     * Clear selection of all buttons of the first group from the panel<br/>
     */<br/>
    public void clearSelection() {<br/>
        this.clearSelection(0);<br/>
    }<br/>
    <br/>
    /**<br/>
     * Selects the radiobutton belonging to the given group with the given <br/>
     * actionCommand<br/>
     * <br/>
     * @param actionCommand The actionCommand of the button that should be<br/>
     * selected.<br/>
     * @param groupIndex        the index of the group<br/>
     */<br/>
    public void setSelected(String actionCommand, int groupIndex) {<br/>
        Iterator buttonsIt = group[groupIndex].getButtons().iterator();<br/>
        ButtonModel model = null;<br/>
        while (buttonsIt.hasNext()) {<br/>
            model = ((JRadioButton) buttonsIt.next()).getModel();<br/>
            if (actionCommand.equals(model.getActionCommand())) {<br/>
                model.setSelected(true);<br/>
                break;<br/>
            }<br/>
        }<br/>
    }<br/>
    <br/>
    /**<br/>
     * Selects the radiobutton belonging to the first group with the given <br/>
     * actionCommand<br/>
     * <br/>
     * @param actionCommand The actionCommand of the button that should be<br/>
     * selected.<br/>
     */<br/>
    public void setSelected(String actionCommand) {<br/>
        this.setSelected(actionCommand, 0);<br/>
    }<br/>
    <br/>
    /**<br/>
     * Set the selected button of a group<br/>
     * <br/>
     * @param m         the ButtonModel<br/>
     * @param b         true if the button should be selected<br/>
     * @param groupIndex        the index of the group<br/>
     */<br/>
    public void setSelected(ButtonModel m, boolean b, int groupIndex) {<br/>
        group[groupIndex].setSelected(m, b);<br/>
    }<br/>
    <br/>
    /**<br/>
     * Check if the given buttons belong to the same group.<br/>
     * <br/>
     * @param button1   the first button<br/>
     * @param button2   the second button<br/>
     * @return          true if the buttons belong to the same group<br/>
     */<br/>
    public boolean buttonsAreGrouped(Component button1, Component button2) {<br/>
        for (int i = 0; i &lt; group.length; i++) {<br/>
            if (group[i].contains(button1)) {<br/>
                <br/>
                return group[i].contains(button2);<br/>
            }<br/>
        }<br/>
        // this means that buttons are not grouped.. this shouldn't happen<br/>
        return false;<br/>
    }<br/>
    <br/>
    /**<br/>
     * Set the selected button of a group<br/>
     * <br/>
     * @param m         the ButtonModel<br/>
     * @param b         true if the button should be selected<br/>
     */<br/>
    public void setSelected(ButtonModel m, boolean b) {<br/>
        this.setSelected(m, b, 0);<br/>
    }<br/>
    <br/>
    private static class ActionHandler implements ActionListener {<br/>
        private final JXButtonGroupPanel panel;<br/>
        private JXButtonPanelFocusTraversalPolicy ftp;<br/>
<br/>
        private static final String FORWARD = "moveSelectionForward";<br/>
        private static final String BACKWARD = "moveSelectionBackward";<br/>
<br/>
        public ActionHandler(JXButtonGroupPanel jXButtonGroupPanel) {<br/>
            this.panel = jXButtonGroupPanel;<br/>
            this.ftp = <br/>
                (JXButtonPanelFocusTraversalPolicy)<br/>
                    panel.getFocusTraversalPolicy();<br/>
        }<br/>
<br/>
        public void actionPerformed(ActionEvent e) {<br/>
            String actionCommand = e.getActionCommand();<br/>
            Component fo =<br/>
                    KeyboardFocusManager.getCurrentKeyboardFocusManager()<br/>
                    .getFocusOwner();<br/>
            Component next = null;<br/>
            <br/>
            ftp.isSkipUnselected = false;<br/>
<br/>
            if (FORWARD.equals(actionCommand)) {<br/>
                if (fo != ftp.getLastComponent(panel)) {<br/>
                    next = getNextElement(fo);<br/>
                }<br/>
            } else if (BACKWARD.equals(actionCommand)) {<br/>
                if (fo != ftp.getFirstComponent(panel)) {<br/>
                    next = getPreviousElement(fo);<br/>
                }<br/>
            } else {<br/>
                throw new AssertionError("Unexpected action command: " <br/>
                        + actionCommand);<br/>
            }<br/>
<br/>
            ftp.isSkipUnselected = true;<br/>
<br/>
            if (fo instanceof JRadioButton) {<br/>
                JRadioButton b = (JRadioButton) fo;<br/>
                b.getModel().setPressed(false);                <br/>
            }<br/>
            if (next != null) {<br/>
                next.requestFocusInWindow();<br/>
                for (int i = 0; i &lt; panel.group.length; i++) {<br/>
                    if (panel.group[i].contains(next)) {<br/>
                        JRadioButton b = (JRadioButton) next;<br/>
                        if (panel.group[i].getSelection() != null<br/>
                                &amp;&amp; !b.isSelected()) {<br/>
                            b.setSelected(true);<br/>
                        }<br/>
                    }<br/>
                }<br/>
            }<br/>
        }<br/>
        <br/>
        private Component getNextElement(Component fo) {<br/>
            Component next = ftp.getComponentAfter(panel, fo);<br/>
            if (next == null || !panel.buttonsAreGrouped(fo, next)) {<br/>
                next = null;<br/>
            } else if (!(next instanceof JRadioButton)) {<br/>
                next = getNextElement(next);<br/>
            }<br/>
            return next;<br/>
        }<br/>
        <br/>
        private Component getPreviousElement(Component fo) {<br/>
            Component next = ftp.getComponentBefore(panel, fo);<br/>
            if (next == null || !panel.buttonsAreGrouped(fo, next)) {<br/>
                next = null;<br/>
            } else if (!(next instanceof JRadioButton)) {<br/>
                next = getPreviousElement(next);<br/>
            }<br/>
            return next;<br/>
        }        <br/>
    }<br/>
<br/>
    /**<br/>
     * Private class JXButtonPanelFocusTraversalPolicy<br/>
     */<br/>
    private class JXButtonPanelFocusTraversalPolicy <br/>
        extends LayoutFocusTraversalPolicy {<br/>
        /**<br/>
         * The UID<br/>
         */<br/>
        private static final long serialVersionUID = -5752691817123671168L;<br/>
        private boolean isSkipUnselected = true;<br/>
<br/>
        protected boolean accept(Component c) {<br/>
            for (int i = 0; i &lt; group.length; i++) {<br/>
                if (isSkipUnselected &amp;&amp; group[i].contains(c)) {<br/>
                    JRadioButton b = (JRadioButton) c;<br/>
                    if (group[i].getSelection() != null &amp;&amp; !b.isSelected()) {<br/>
                        return false;<br/>
                    }<br/>
                }<br/>
            }<br/>
            return super.accept(c);<br/>
        }<br/>
    }<br/>
}<br/>
    <br/>
</div>
</div>
</div>
<div class="clear"></div>
</div>
</body>
</html>